<!-- Generated by SpecStory -->

# 直接在template中编写组件 (2025-06-07 16:44:55)

_**User**_

@CategorySidebar.vue @QuestionCard.vue @ThemeToggle.vue 不要使用apply而是直接在template中编写

---

_**Assistant**_



---

[MODE: EXECUTE]

我需要将这三个组件中的 `@apply` 指令替换成直接在template中编写的Tailwind CSS类。让我逐个文件进行修改：

---

```diff
  <template>
-   <div class="theme-toggle">
+   <div class="flex items-center">
      <!-- daisyUI主题切换器 -->
      <div class="dropdown dropdown-end">
```

```diff
  
  <style scoped>
- .theme-toggle {
-   @apply flex items-center;
- }
- 
  /* 自定义主题切换器样式 */
  .theme-controller {
```

```diff
  
  .theme-controller:checked {
-   @apply bg-primary text-primary-content;
+   background-color: oklch(var(--p));
+   color: oklch(var(--pc));
  }
  </style> 
```

---

```diff
  <template>
-   <div class="category-sidebar bg-base-200 border-r border-base-300 h-full">
+   <div class="flex flex-col bg-base-200 border-r border-base-300 h-full" style="width: 280px; min-width: 280px;">
      <!-- 顶部标题和主题切换 -->
      <div class="p-4 border-b border-base-300">
```

```diff
              type="text" 
              placeholder="搜索题目..." 
-             class="input input-bordered input-sm w-full"
+             class="input input-bordered input-sm w-full focus:border-primary focus:ring-1 focus:ring-primary"
              :value="searchQuery"
              @input="handleSearch"
```

```diff
          <li>
            <a 
-             class="menu-item"
-             :class="{ 'active': currentCategoryId === '' }"
+             class="menu-item transition-all duration-200 hover:bg-base-300"
+             :class="{ 'bg-primary text-primary-content font-medium': currentCategoryId === '' }"
              @click="selectCategory('')"
            >
```

```diff
                <div class="flex items-center justify-between">
                  <span>全部题目</span>
-                 <span class="badge badge-ghost badge-sm">{{ totalQuestions }}</span>
+                 <span class="badge badge-ghost badge-sm" :class="{ 'badge-primary-content': currentCategoryId === '' }">{{ totalQuestions }}</span>
                </div>
              </div>
```

```diff
          <li v-for="category in categories" :key="category.id">
            <a 
-             class="menu-item"
-             :class="{ 'active': currentCategoryId === category.id }"
+             class="menu-item transition-all duration-200 hover:bg-base-300"
+             :class="{ 'bg-primary text-primary-content font-medium': currentCategoryId === category.id }"
              @click="selectCategory(category.id)"
            >
```

```diff
                <div class="flex items-center justify-between">
                  <span>{{ category.name }}</span>
-                 <span class="badge badge-ghost badge-sm">{{ category.questionCount }}</span>
+                 <span class="badge badge-ghost badge-sm" :class="{ 'badge-primary-content': currentCategoryId === category.id }">{{ category.questionCount }}</span>
                </div>
              </div>
```

```diff
          
          <!-- 分隔线 -->
-         <div class="divider my-2"></div>
+         <div class="my-2 h-px bg-base-300 border-none"></div>
          
          <!-- 收藏夹 -->
          <li>
            <a 
-             class="menu-item"
-             :class="{ 'active': currentView === 'bookmarks' }"
+             class="menu-item transition-all duration-200 hover:bg-base-300"
+             :class="{ 'bg-primary text-primary-content font-medium': currentView === 'bookmarks' }"
              @click="selectSpecialView('bookmarks')"
            >
```

```diff
                <div class="flex items-center justify-between">
                  <span>我的收藏</span>
-                 <span class="badge badge-error badge-sm">{{ bookmarkedCount }}</span>
+                 <span class="badge badge-error badge-sm" :class="{ 'badge-primary-content': currentView === 'bookmarks' }">{{ bookmarkedCount }}</span>
                </div>
              </div>
```

```diff
          <li>
            <a 
-             class="menu-item"
-             :class="{ 'active': currentView === 'edited' }"
+             class="menu-item transition-all duration-200 hover:bg-base-300"
+             :class="{ 'bg-primary text-primary-content font-medium': currentView === 'edited' }"
              @click="selectSpecialView('edited')"
            >
```

```diff
                <div class="flex items-center justify-between">
                  <span>已编辑</span>
-                 <span class="badge badge-warning badge-sm">{{ editedCount }}</span>
+                 <span class="badge badge-warning badge-sm" :class="{ 'badge-primary-content': currentView === 'edited' }">{{ editedCount }}</span>
                </div>
              </div>
```

```diff
      <!-- 底部统计信息 -->
      <div class="mt-auto p-4 border-t border-base-300">
-       <div class="stats stats-vertical shadow-sm bg-base-100">
-         <div class="stat py-2">
+       <div class="stats stats-vertical shadow-sm bg-base-100 rounded-lg">
+         <div class="stat py-2 text-center">
            <div class="stat-title text-xs">总题目数</div>
            <div class="stat-value text-lg">{{ totalQuestions }}</div>
          </div>
-         <div class="stat py-2">
+         <div class="stat py-2 text-center">
            <div class="stat-title text-xs">已收藏</div>
            <div class="stat-value text-lg text-error">{{ bookmarkedCount }}</div>
          </div>
-         <div class="stat py-2">
+         <div class="stat py-2 text-center">
            <div class="stat-title text-xs">已编辑</div>
            <div class="stat-value text-lg text-warning">{{ editedCount }}</div>
```

```diff
        <div class="mt-4">
          <button 
-           class="btn btn-outline btn-block btn-sm"
+           class="btn btn-outline btn-block btn-sm hover:border-primary hover:bg-primary hover:text-primary-content"
            @click="handleExport"
          >
```

```diff
  
  <style scoped>
- .category-sidebar {
-   @apply flex flex-col;
-   width: 280px;
-   min-width: 280px;
- }
- 
- /* 菜单项样式 */
- .menu-item {
-   @apply transition-all duration-200;
- }
- 
- .menu-item:hover {
-   @apply bg-base-300;
- }
- 
- .menu-item.active {
-   @apply bg-primary text-primary-content font-medium;
- }
- 
- .menu-item.active .badge {
-   @apply badge-primary-content;
- }
- 
- /* 统计卡片样式 */
- .stats {
-   @apply rounded-lg;
- }
- 
- .stat {
-   @apply text-center;
- }
- 
- /* 搜索框样式 */
- .input-group .input:focus {
-   @apply border-primary ring-1 ring-primary;
- }
- 
- /* 分隔线 */
- .divider {
-   @apply my-2 h-px bg-base-300 border-none;
- }
- 
- /* 导出按钮悬停效果 */
- .btn-outline:hover {
-   @apply border-primary bg-primary text-primary-content;
- }
- 
  /* 滚动条样式 */
  .category-sidebar {
```

---



---

```diff
  <template>
    <div 
-     class="collapse bg-base-100 border border-base-300 rounded-lg mb-4 shadow-sm transition-all duration-200 hover:shadow-md"
-     :class="{ 'collapse-open': question.isExpanded }"
+     class="collapse bg-base-100 border border-base-300 rounded-lg mb-4 shadow-sm transition-all duration-300 ease-in-out hover:shadow-lg hover:border-primary/30 hover:scale-[1.01] hover:origin-center"
+     :class="{ 
+       'collapse-open border-primary/40 shadow-md': question.isExpanded 
+     }"
    >
      <!-- 题目标题区域 -->
      <div 
-       class="collapse-title cursor-pointer p-4"
+       class="collapse-title cursor-pointer p-4 transition-all duration-200 hover:bg-base-200/50 active:scale-[0.99]"
+       :class="{ 'bg-primary/5': question.isExpanded }"
        @click="handleToggle"
      >
```

```diff
              <span 
                v-if="question.isEdited" 
-               class="badge badge-warning badge-sm"
+               class="badge badge-warning badge-sm transition-all duration-200 hover:scale-105"
                title="已编辑"
              >
```

```diff
              <span 
                v-if="question.isBookmarked" 
-               class="badge badge-error badge-sm"
+               class="badge badge-error badge-sm transition-all duration-200 hover:scale-105"
                title="已收藏"
              >
```

```diff
              <span 
                v-if="showReadCount && question.readCount > 0"
-               class="badge badge-ghost badge-sm"
+               class="badge badge-ghost badge-sm transition-all duration-200 hover:scale-105"
                :title="`阅读次数: ${question.readCount}`"
              >
```

```diff
            <!-- 收藏按钮 -->
            <button 
-             class="btn btn-ghost btn-sm btn-circle"
-             :class="{ 'text-error': question.isBookmarked }"
+             class="btn btn-ghost btn-sm btn-circle hover:scale-110 active:scale-95 transition-transform duration-200"
+             :class="{ 
+               'text-error hover:bg-error/10': question.isBookmarked 
+             }"
              @click.stop="handleBookmark"
              :title="question.isBookmarked ? '取消收藏' : '收藏'"
```

```diff
            <!-- 编辑按钮 -->
            <button 
-             class="btn btn-ghost btn-sm btn-circle"
+             class="btn btn-ghost btn-sm btn-circle hover:scale-110 active:scale-95 transition-transform duration-200"
              @click.stop="handleEdit"
              title="编辑"
```

```diff
            <div class="text-base-content/60">
              <svg 
-               class="w-4 h-4 transition-transform duration-200"
+               class="w-4 h-4 transition-transform duration-300"
                :class="{ 'rotate-180': question.isExpanded }"
                fill="none" 
```

```diff
      <div 
        v-if="question.isExpanded"
-       class="collapse-content px-4 pb-4"
+       class="collapse-content px-4 pb-4 animate-slideDown"
      >
        <div class="border-t border-base-300 pt-4">
```

```diff
          <div class="flex items-center justify-between mt-4 pt-4 border-t border-base-300/50">
            <!-- 时间信息 -->
-           <div class="text-xs text-base-content/60 space-y-1">
+           <div class="text-xs text-base-content/60 space-y-1 animate-fadeInLeft">
              <div>创建时间: {{ formatDate(question.createTime) }}</div>
              <div v-if="question.isEdited && question.editedAt">
```

```diff
              <button 
                v-if="question.isEdited"
-               class="btn btn-outline btn-sm"
+               class="btn btn-outline btn-sm animate-fadeInUp"
                @click="handleRestore"
              >
```

```diff
              <!-- 分享按钮 -->
              <button 
-               class="btn btn-outline btn-sm"
+               class="btn btn-outline btn-sm animate-fadeInUp animate-delay-100"
                @click="handleShare"
              >
```

```diff
      class="modal"
    >
-     <div class="modal-box w-11/12 max-w-4xl">
+     <div class="modal-box w-11/12 max-w-4xl animate-modalSlideIn">
        <form method="dialog">
          <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
```

```diff
            <textarea 
              v-model="editForm.subject"
-             class="textarea textarea-bordered h-24 resize-none"
+             class="textarea textarea-bordered h-24 resize-none focus:ring-2 focus:ring-primary/20 focus:border-primary/50 transition-all duration-200"
              placeholder="请输入题目内容"
            ></textarea>
```

```diff
            <textarea 
              v-model="editForm.answer"
-             class="textarea textarea-bordered h-48 resize-none"
+             class="textarea textarea-bordered h-48 resize-none focus:ring-2 focus:ring-primary/20 focus:border-primary/50 transition-all duration-200"
              placeholder="请输入答案内容"
            ></textarea>
```

```diff
  
  <style scoped>
- /* 卡片基础样式 */
- .collapse {
-   @apply transition-all duration-300 ease-in-out;
-   transform-origin: top;
- }
- 
- .collapse:hover {
-   @apply shadow-lg border-primary/30 scale-[1.01];
-   transform-origin: center;
- }
- 
- .collapse-title {
-   @apply transition-all duration-200;
-   min-height: auto;
- }
- 
- .collapse-title:hover {
-   @apply bg-base-200/50;
- }
- 
- .collapse-title:active {
-   @apply scale-[0.99];
- }
- 
  /* 展开/折叠状态控制 */
  .collapse:not(.collapse-open) .collapse-content {
```

```diff
  }
  
- /* 展开/折叠动画优化 */
- .collapse-content {
-   animation: slideDown 0.3s ease-out;
-   transform-origin: top;
- }
- 
+ /* 动画关键帧 */
  @keyframes slideDown {
    from {
```

```diff
    }
  }
- 
- /* 展开状态样式 */
- .collapse-open {
-   @apply border-primary/40 shadow-md;
- }
- 
- .collapse-open .collapse-title {
-   @apply bg-primary/5;
- }
- 
- /* 按钮悬停效果 */
- .btn-circle:hover {
-   @apply scale-110;
-   transition: transform 0.2s ease;
- }
- 
- .btn-circle:active {
-   @apply scale-95;
- }
- 
- /* 收藏按钮特殊效果 */
- .btn-circle.text-error:hover {
-   @apply bg-error/10;
- }
- 
- /* 展开指示器动画 */
- .rotate-180 {
-   transform: rotate(180deg);
-   transition: transform 0.3s ease;
- }
- 
- /* 徽章动画 */
- .badge {
-   @apply transition-all duration-200;
- }
- 
- .badge:hover {
-   @apply scale-105;
- }
- 
- /* 编辑模态框动画 */
- .modal-box {
-   animation: modalSlideIn 0.3s ease-out;
- }
- 
- @keyframes modalSlideIn {
-   from {
-     opacity: 0;
-     transform: translateY(-20px) scale(0.95);
-   }
-   to {
-     opacity: 1;
-     transform: translateY(0) scale(1);
-   }
- }
- 
- /* 表单输入动画 */
- .textarea:focus,
- .input:focus {
-   @apply ring-2 ring-primary/20 border-primary/50;
-   transition: all 0.2s ease-in-out;
- }
- 
- /* 时间信息渐入动画 */
- .collapse-content .text-xs {
-   animation: fadeInLeft 0.4s ease-out 0.1s both;
- }
  
  @keyframes fadeInLeft {
```

```diff
    }
  }
- 
- /* 操作按钮组动画 */
- .collapse-content .btn {
-   animation: fadeInUp 0.4s ease-out both;
- }
- 
- .collapse-content .btn:nth-child(2) {
-   animation-delay: 0.1s;
- }
  
  @keyframes fadeInUp {
```

```diff
    }
  }
+ 
+ @keyframes modalSlideIn {
+   from {
+     opacity: 0;
+     transform: translateY(-20px) scale(0.95);
+   }
+   to {
+     opacity: 1;
+     transform: translateY(0) scale(1);
+   }
+ }
+ 
+ /* 动画工具类 */
+ .animate-slideDown {
+   animation: slideDown 0.3s ease-out;
+   transform-origin: top;
+ }
+ 
+ .animate-fadeInLeft {
+   animation: fadeInLeft 0.4s ease-out 0.1s both;
+ }
+ 
+ .animate-fadeInUp {
+   animation: fadeInUp 0.4s ease-out both;
+ }
+ 
+ .animate-delay-100 {
+   animation-delay: 0.1s;
+ }
+ 
+ .animate-modalSlideIn {
+   animation: modalSlideIn 0.3s ease-out;
+ }
  
  /* 答案内容样式 */
```

```diff
  
  .prose pre {
-   @apply bg-base-200 text-base-content;
+   background-color: oklch(var(--b2));
+   color: oklch(var(--bc));
  }
  
  /* 响应式优化 */
  @media (max-width: 768px) {
    .collapse:hover {
-     @apply scale-100; /* 移动端不要缩放效果 */
+     transform: none; /* 移动端不要缩放效果 */
    }
    
    .btn-circle:hover {
-     @apply scale-100; /* 移动端按钮不要缩放 */
+     transform: none; /* 移动端按钮不要缩放 */
    }
    
    /* 移动端长按效果 */
    .collapse-title:active {
-     @apply bg-base-200/70 scale-[0.98];
+     background-color: oklch(var(--b2) / 0.7);
+     transform: scale(0.98);
      transition: all 0.1s ease;
    }
```

```diff
  @media (prefers-contrast: high) {
    .collapse {
-     @apply border-2;
+     border-width: 2px;
    }
    
-   .collapse-open {
-     @apply border-primary;
+   .collapse.collapse-open {
+     border-color: oklch(var(--p));
    }
  }
```

```diff
    .collapse-content,
    .btn-circle,
-   .badge {
+   .badge,
+   .animate-slideDown,
+   .animate-fadeInLeft,
+   .animate-fadeInUp,
+   .animate-modalSlideIn {
      animation: none;
      transition: none;
    }
    
-   .rotate-180 {
+   .transition-transform {
      transition: none;
    }
```

```diff
  @media (prefers-color-scheme: dark) {
    .collapse:hover {
-     @apply shadow-xl;
+     box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
  }
```

---

已完成所有三个组件的修改，成功将 `@apply` 指令替换为直接在template中编写的Tailwind CSS类。主要修改内容包括：

## 修改总结：

### 1. **ThemeToggle.vue**
- 将 `.theme-toggle` 的 `@apply flex items-center` 直接写在template的div class中
- 将 `.theme-controller:checked` 的 `@apply bg-primary text-primary-content` 替换为原生CSS变量

### 2. **CategorySidebar.vue**
- 将容器的基础样式直接写在template中：`flex flex-col bg-base-200 border-r border-base-300 h-full`
- 将菜单项的交互样式直接写在template中：`transition-all duration-200 hover:bg-base-300`
- 将状态样式通过 `:class` 动态绑定：`bg-primary text-primary-content font-medium`
- 将统计卡片、搜索框、按钮等样式直接写在对应元素上
- 保留了滚动条样式的CSS代码（无法用class表达）

### 3. **QuestionCard.vue**
- 将卡片的基础样式和悬停效果直接写在template中
- 将按钮的交互效果（hover、active状态）直接写在template中
- 将徽章的动画效果直接写在template中
- 将表单输入的焦点样式直接写在textarea元素上
- 保留了关键帧动画、媒体查询等必须用CSS表达的样式
- 创建了自定义动画工具类来替代原来的 `@apply` 动画

所有组件现在都直接在template中使用Tailwind CSS类，避免了 `@apply` 指令的使用，提高了样式的可读性和可维护性。

---

