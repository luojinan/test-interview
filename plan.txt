# Context
Filename: plan.txt
Created On: 2024-12-30
Created By: AI Assistant
Associated Protocol: RIPER-5 + Multidimensional + Agent Protocol

# Task Description
è®¾è®¡å¼€å‘ä¸€ä¸ªå“åº”å¼é¢è¯•é¢˜åº“webåº”ç”¨ï¼Œè¦æ±‚åœ¨PCå’Œç§»åŠ¨ç«¯éƒ½æœ‰è‰¯å¥½çš„äº¤äº’æ•ˆæœã€‚ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š
1. ä½¿ç”¨daisyUI collapseç»„ä»¶å®ç°é¢˜ç›®ç­”æ¡ˆäº¤äº’
2. æ•°æ®æŒ‰ç±»åˆ«åˆ†ç»„ï¼ˆå¦‚"Linuxé¢˜"ã€"Pythoné¢˜"ï¼‰
3. åˆ†ç±»é€‰æ‹©å™¨å›ºå®šåœ¨é¡¶éƒ¨
4. ä½¿ç”¨theme-controllerç»„ä»¶æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
5. æ”¯æŒåœ¨çº¿ç¼–è¾‘é—®é¢˜ç­”æ¡ˆå¹¶ä¿å­˜åˆ°æµè§ˆå™¨æœ¬åœ°ç¼“å­˜
6. ä½¿ç”¨IndexDBç¬¬ä¸‰æ–¹åº“ç®¡ç†æœ¬åœ°æ•°æ®å­˜å‚¨

# Project Overview
å½“å‰é¡¹ç›®åŸºäºVue 3 + TypeScript + Vite + TailwindCSS + daisyUIæŠ€æœ¯æ ˆï¼š
- Vue 3.5.13 ä½œä¸ºå‰ç«¯æ¡†æ¶
- Vue Router 4.5.0 å¤„ç†è·¯ç”±
- TailwindCSS 4.1.8 + daisyUI 5.0.43 ç”¨äºUIæ ·å¼
- TypeScript æ”¯æŒç±»å‹å®‰å…¨
- Vite 6.2.4 ä½œä¸ºæ„å»ºå·¥å…·

---
*The following sections are maintained by the AI during protocol execution*
---

# Analysis (Populated by RESEARCH mode)

## æŠ€æœ¯æ ˆåˆ†æ
å½“å‰é¡¹ç›®å·²ç»é…ç½®äº†æ ¸å¿ƒä¾èµ–ï¼š
- âœ… Vue 3 + TypeScript åŸºç¡€æ¡†æ¶
- âœ… TailwindCSS + daisyUI UIç»„ä»¶åº“ (å·²æ­£ç¡®é…ç½®åœ¨main.cssä¸­)
- âœ… Vite ç°ä»£æ„å»ºå·¥å…·
- âœ… Vue Router è·¯ç”±ç®¡ç†

## ç¼ºå¤±ä¾èµ–åˆ†æ
éœ€è¦æ·»åŠ çš„ç¬¬ä¸‰æ–¹åº“ï¼š
- ğŸ“‹ IndexDBæ“ä½œåº“ï¼ˆæ¨è Dexie.js - æˆç†Ÿæ˜“ç”¨çš„IndexDBå°è£…åº“ï¼‰
- ğŸ“‹ çŠ¶æ€ç®¡ç†ï¼ˆè€ƒè™‘æ·»åŠ Piniaç®¡ç†é¢˜åº“çŠ¶æ€å’Œä¸»é¢˜çŠ¶æ€ï¼‰

## é¡¹ç›®ç»“æ„åˆ†æ
å½“å‰ç›®å½•ç»“æ„ï¼š
```
src/
â”œâ”€â”€ App.vue (åŸºç¡€è·¯ç”±å®¹å™¨ + daisyUIæŒ‰é’®ç¤ºä¾‹)
â”œâ”€â”€ main.ts (åº”ç”¨å…¥å£)
â”œâ”€â”€ views/ (é¡µé¢ç»„ä»¶)
â”œâ”€â”€ components/ (é€šç”¨ç»„ä»¶)
â”œâ”€â”€ router/ (è·¯ç”±é…ç½®)
â”œâ”€â”€ assets/main.css (TailwindCSS + daisyUIæ ·å¼é…ç½®)
â””â”€â”€ assets/ (é™æ€èµ„æº)
```

## æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚åˆ†æ

### 1. æ•°æ®ç»“æ„è®¾è®¡
é¢˜åº“æ•°æ®æ¨¡å‹TypeScriptæ¥å£å®šä¹‰ï¼š
```typescript
interface Category {
  id: string;
  name: string;  // "Linuxé¢˜", "Pythoné¢˜"
  description?: string;
}

interface Question {
  id: string;
  categoryId: string;
  question: string;
  answer: string;
  isEdited: boolean;
  editedAt?: Date;
  originalQuestion?: string;
  originalAnswer?: string;
}

interface UserEdit {
  questionId: string;
  editedQuestion: string;
  editedAnswer: string;
  editedAt: Date;
}
```

### 1. æ•°æ®ç»“æ„è®¾è®¡

#### åŸå§‹æ•°æ®æ ¼å¼åˆ†æï¼ˆåŸºäºåä¸ºé¢è¯•é¢˜JSONï¼‰
```typescript
// åŸå§‹JSONæ•°æ®ç»“æ„
interface OriginalQuestionData {
  id: number;
  catalogId: number;
  subject: string;        // é¢˜ç›®å†…å®¹
  answer: string;         // ç­”æ¡ˆå†…å®¹
  readCount: number;      // é˜…è¯»æ¬¡æ•°
  createTime: number[];   // åˆ›å»ºæ—¶é—´æ•°ç»„ [å¹´,æœˆ,æ—¥,æ—¶,åˆ†,ç§’]
  updateTime: number[];   // æ›´æ–°æ—¶é—´æ•°ç»„
  optionStatus: number;   // é€‰é¡¹çŠ¶æ€
  catalogName: string | null;  // åˆ†ç±»åç§°
  collect: boolean;       // æ”¶è—çŠ¶æ€
}

// åŸå§‹åˆ†ç±»æ•°æ®ç»“æ„æ¨å¯¼
interface OriginalCatalogData {
  id: number;
  name: string;           // åˆ†ç±»åç§°
  description?: string;
}
```

#### åº”ç”¨æ•°æ®æ ¼å¼è®¾è®¡
```typescript
// åº”ç”¨å†…ä½¿ç”¨çš„åˆ†ç±»æ¥å£
interface Category {
  id: string;
  name: string;           // "Linuxé¢˜", "Pythoné¢˜", "åä¸ºè½¯ä»¶æµ‹è¯•é¢˜"
  description?: string;
  questionCount: number;  // è¯¥åˆ†ç±»ä¸‹çš„é¢˜ç›®æ•°é‡
  icon?: string;          // åˆ†ç±»å›¾æ ‡
}

// åº”ç”¨å†…ä½¿ç”¨çš„é¢˜ç›®æ¥å£
interface Question {
  id: string;
  categoryId: string;
  subject: string;        // é¢˜ç›®å†…å®¹
  answer: string;         // ç­”æ¡ˆå†…å®¹
  readCount: number;      // é˜…è¯»æ¬¡æ•°
  createTime: Date;       // åˆ›å»ºæ—¶é—´
  updateTime: Date;       // æ›´æ–°æ—¶é—´
  isCollected: boolean;   // æ”¶è—çŠ¶æ€
  
  // ç”¨æˆ·ç¼–è¾‘ç›¸å…³
  isEdited: boolean;
  editedAt?: Date;
  originalSubject?: string;
  originalAnswer?: string;
  
  // UIçŠ¶æ€
  isExpanded: boolean;    // æ˜¯å¦å±•å¼€ç­”æ¡ˆ
  isBookmarked: boolean;  // æ˜¯å¦å·²æ”¶è—
}

// ç”¨æˆ·ç¼–è¾‘è®°å½•
interface UserEdit {
  questionId: string;
  editedSubject: string;
  editedAnswer: string;
  editedAt: Date;
  editType: 'subject' | 'answer' | 'both';
}

// ç”¨æˆ·åå¥½è®¾ç½®
interface UserPreferences {
  selectedCategoryId: string;
  theme: 'light' | 'dark' | 'auto';
  autoExpandAnswers: boolean;
  showReadCount: boolean;
  compactMode: boolean;
}

// åº”ç”¨çŠ¶æ€æ¥å£
interface InterviewBankState {
  categories: Category[];
  questions: Question[];
  userEdits: UserEdit[];
  preferences: UserPreferences;
  currentCategoryId: string;
  searchQuery: string;
  isLoading: boolean;
  error?: string;
}
```

#### æ•°æ®è½¬æ¢æ–¹æ¡ˆ
```typescript
// æ•°æ®è½¬æ¢å·¥å…·å‡½æ•°
interface DataTransformUtils {
  // æ—¶é—´æ•°ç»„è½¬æ¢ä¸ºDateå¯¹è±¡
  arrayToDate: (timeArray: number[]) => Date;
  
  // åŸå§‹æ•°æ®è½¬æ¢ä¸ºåº”ç”¨æ•°æ®
  transformOriginalQuestion: (original: OriginalQuestionData) => Question;
  
  // æ‰¹é‡æ•°æ®è½¬æ¢
  transformQuestionsBatch: (original: OriginalQuestionData[]) => Question[];
  
  // åˆ†ç±»æ•°æ®èšåˆ
  aggregateCategories: (questions: Question[]) => Category[];
  
  // æ•°æ®éªŒè¯
  validateQuestionData: (question: Question) => boolean;
}
```

#### æ•°æ®å­˜å‚¨æ–¹æ¡ˆï¼ˆåŸºäºå®é™…JSONæ•°æ®ï¼‰
```typescript
// æœ¬åœ°å­˜å‚¨ç»“æ„
interface LocalStorageSchema {
  // åŸå§‹æ•°æ®ç¼“å­˜
  originalData: {
    questions: OriginalQuestionData[];
    lastUpdated: Date;
    version: string;
  };
  
  // ç”¨æˆ·æ•°æ®
  userData: {
    edits: UserEdit[];
    preferences: UserPreferences;
    bookmarks: string[];  // æ”¶è—çš„é¢˜ç›®IDåˆ—è¡¨
    readHistory: {
      questionId: string;
      lastRead: Date;
      readCount: number;
    }[];
  };
  
  // åº”ç”¨ç¼“å­˜
  appCache: {
    transformedQuestions: Question[];
    categories: Category[];
    lastProcessed: Date;
  };
}
```

#### æ•°æ®å¤„ç†æµç¨‹
1. **æ•°æ®åŠ è½½**ï¼šä»JSONæ–‡ä»¶åŠ è½½åŸå§‹åä¸ºé¢è¯•é¢˜æ•°æ®
2. **æ•°æ®è½¬æ¢**ï¼šå°†åŸå§‹æ ¼å¼è½¬æ¢ä¸ºåº”ç”¨å†…æ ¼å¼
3. **åˆ†ç±»èšåˆ**ï¼šåŸºäºcatalogIdå’ŒcatalogNameç”Ÿæˆåˆ†ç±»åˆ—è¡¨
4. **çŠ¶æ€åˆå§‹åŒ–**ï¼šè®¾ç½®é»˜è®¤çš„UIçŠ¶æ€ï¼ˆæŠ˜å çŠ¶æ€ã€é€‰ä¸­åˆ†ç±»ç­‰ï¼‰
5. **æœ¬åœ°å­˜å‚¨**ï¼šå°†è½¬æ¢åçš„æ•°æ®å­˜å‚¨åˆ°localStorage/IndexedDB
6. **å¢é‡æ›´æ–°**ï¼šæ”¯æŒæ–°æ•°æ®çš„å¢é‡åŠ è½½å’Œåˆå¹¶

#### ç¤ºä¾‹æ•°æ®è½¬æ¢
```typescript
// åŸå§‹æ•°æ®ç¤ºä¾‹
const originalData: OriginalQuestionData = {
  id: 153,
  catalogId: 16,
  subject: "1ã€ä¸‹é¢å“ªä¸ªLinuxå‘½ä»¤å¯ä»¥ä¸€æ¬¡æ˜¾ç¤ºä¸€é¡µå†…å®¹ï¼Ÿ",
  answer: "Aã€pause\n\nBã€cat\n\nCã€more\n\nDã€rep\n",
  readCount: 820,
  createTime: [2022, 6, 10, 9, 9, 40],
  updateTime: [2022, 6, 10, 9, 9, 40],
  optionStatus: 0,
  catalogName: null,
  collect: false
};

// è½¬æ¢åçš„åº”ç”¨æ•°æ®
const transformedData: Question = {
  id: "153",
  categoryId: "16",
  subject: "1ã€ä¸‹é¢å“ªä¸ªLinuxå‘½ä»¤å¯ä»¥ä¸€æ¬¡æ˜¾ç¤ºä¸€é¡µå†…å®¹ï¼Ÿ",
  answer: "Aã€pause\n\nBã€cat\n\nCã€more\n\nDã€rep\n",
  readCount: 820,
  createTime: new Date(2022, 5, 10, 9, 9, 40), // æœˆä»½éœ€è¦-1
  updateTime: new Date(2022, 5, 10, 9, 9, 40),
  isCollected: false,
  isEdited: false,
  isExpanded: false,
  isBookmarked: false
};
```

### 2. ç»„ä»¶æ¶æ„åˆ†æ
éœ€è¦åˆ›å»ºçš„ä¸»è¦ç»„ä»¶ï¼š
- **InterviewBankView.vue** - é¢˜åº“ä¸»é¡µé¢è§†å›¾
- **CategoryTabs.vue** - é¡¶éƒ¨å›ºå®šåˆ†ç±»é€‰æ‹©å™¨ï¼ˆä½¿ç”¨daisyUI tabsï¼‰
- **QuestionList.vue** - é¢˜ç›®åˆ—è¡¨å®¹å™¨ï¼ˆæ”¯æŒè™šæ‹Ÿæ»šåŠ¨ï¼‰
- **QuestionCard.vue** - é¢˜ç›®å¡ç‰‡ï¼ˆåŸºäºdaisyUI collapseç»„ä»¶ï¼‰
- **ThemeToggle.vue** - ä¸»é¢˜åˆ‡æ¢å™¨ï¼ˆåŸºäºdaisyUI theme-controllerï¼‰
- **EditModal.vue** - ç¼–è¾‘æ¨¡æ€æ¡†ï¼ˆä½¿ç”¨daisyUI modalï¼‰
- **SearchBar.vue** - é¢˜ç›®æœç´¢åŠŸèƒ½

### 3. daisyUIç»„ä»¶ä½¿ç”¨æ–¹æ¡ˆ

#### Collapseç»„ä»¶é›†æˆ
åŸºäºæä¾›çš„daisyUI collapseæ–‡æ¡£ï¼Œé€‰æ‹©checkboxæ–¹å¼å®ç°ï¼š
```html
<div class="collapse bg-base-100 border-base-300 border">
  <input type="checkbox" />
  <div class="collapse-title font-semibold">é—®é¢˜æ ‡é¢˜</div>
  <div class="collapse-content text-sm">ç­”æ¡ˆå†…å®¹</div>
</div>
```

#### Theme Controlleré›†æˆ
éœ€è¦ç ”ç©¶theme-controllerç»„ä»¶çš„å…·ä½“å®ç°æ–¹å¼ï¼Œæ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢ã€‚

### 4. å“åº”å¼è®¾è®¡è¦ç‚¹
- ç§»åŠ¨ç«¯ä¼˜åŒ–çš„collapseäº¤äº’ï¼ˆè§¦æ‘¸å‹å¥½ï¼‰
- é¡¶éƒ¨å›ºå®šå¯¼èˆªçš„ç§»åŠ¨ç«¯é€‚é…ï¼ˆsticky positioningï¼‰
- ç¼–è¾‘åŠŸèƒ½çš„è§¦æ‘¸å‹å¥½ç•Œé¢ï¼ˆæ›´å¤§çš„æŒ‰é’®å’Œè¾“å…¥åŒºåŸŸï¼‰
- é€‚é…ä¸åŒå±å¹•å°ºå¯¸çš„å¸ƒå±€ï¼ˆsm/md/lgæ–­ç‚¹ï¼‰
- ç§»åŠ¨ç«¯çš„åˆ†ç±»åˆ‡æ¢ä½“éªŒä¼˜åŒ–

### 5. æœ¬åœ°å­˜å‚¨æ–¹æ¡ˆ
IndexDBæ–¹æ¡ˆè¯¦ç»†è®¾è®¡ï¼š
```javascript
// ä½¿ç”¨Dexie.jsçš„æ•°æ®åº“è®¾è®¡
const db = new Dexie('InterviewBankDB');
db.version(1).stores({
  categories: 'id, name, description',
  questions: 'id, categoryId, question, answer, isEdited, editedAt',
  userEdits: 'questionId, editedQuestion, editedAnswer, editedAt'
});
```

å­˜å‚¨ç­–ç•¥ï¼š
- åˆå§‹æ•°æ®é¢„å¡«å……ï¼ˆå†…ç½®é¢˜åº“ï¼‰
- ç”¨æˆ·ç¼–è¾‘å¢é‡å­˜å‚¨
- æ”¯æŒæ•°æ®å¯¼å‡º/å¯¼å…¥JSONæ ¼å¼
- æ•°æ®ç‰ˆæœ¬ç®¡ç†å’Œè¿ç§»

### 6. æ€§èƒ½ä¼˜åŒ–è€ƒè™‘
- è™šæ‹Ÿæ»šåŠ¨ï¼šå½“é¢˜ç›®æ•°é‡è¶…è¿‡100æ¡æ—¶å¯ç”¨
- æ‡’åŠ è½½ï¼šæŒ‰åˆ†ç±»æŒ‰éœ€åŠ è½½é¢˜ç›®
- æœç´¢ä¼˜åŒ–ï¼šå®¢æˆ·ç«¯å…¨æ–‡æœç´¢ + é˜²æŠ–
- ç¼“å­˜ç­–ç•¥ï¼šåˆç†ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜

## æŠ€æœ¯çº¦æŸä¸è€ƒè™‘
1. **daisyUIç‰ˆæœ¬å…¼å®¹æ€§**ï¼šå½“å‰5.0.43ç‰ˆæœ¬çš„collapseå’Œtheme-controller API
2. **Vue 3 Composition APIæœ€ä½³å®è·µ**ï¼šä½¿ç”¨setupè¯­æ³•ç³–å’Œç»„åˆå¼å‡½æ•°
3. **TypeScriptç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ç±»å‹å®šä¹‰ï¼Œé¿å…anyç±»å‹
4. **ç§»åŠ¨ç«¯æ€§èƒ½**ï¼šé¿å…è¿‡åº¦æ¸²æŸ“ï¼Œä¼˜åŒ–æ»šåŠ¨æ€§èƒ½
5. **æ— éšœç¢æ”¯æŒ**ï¼škeyboard navigationå’Œscreen readeræ”¯æŒ

## å¾…æ˜ç¡®çš„é—®é¢˜
1. **åˆå§‹æ•°æ®æ¥æº**ï¼šå»ºè®®å…ˆåˆ›å»ºé™æ€JSONæ•°æ®æ–‡ä»¶ä½œä¸ºåˆå§‹é¢˜åº“
2. **é¢˜ç›®æ•°é‡è§„æ¨¡**ï¼šå»ºè®®æ¯ä¸ªåˆ†ç±»50-200é¢˜ï¼Œæ€»é‡500-1000é¢˜
3. **ç¼–è¾‘æƒé™æ§åˆ¶**ï¼šå½“å‰æ–¹æ¡ˆä¸ºçº¯æœ¬åœ°ç¼–è¾‘ï¼Œæ— æƒé™æ§åˆ¶
4. **æ•°æ®åŒæ­¥éœ€æ±‚**ï¼šæ˜¯å¦éœ€è¦äº‘ç«¯åŒæ­¥åŠŸèƒ½ï¼ˆåæœŸæ‰©å±•ï¼‰
5. **æœç´¢åŠŸèƒ½èŒƒå›´**ï¼šæ”¯æŒé—®é¢˜å’Œç­”æ¡ˆçš„å…¨æ–‡æœç´¢
6. **ä¸»é¢˜å®šåˆ¶**ï¼šæ˜¯å¦éœ€è¦è¶…å‡ºdaisyUIé»˜è®¤ä¸»é¢˜çš„è‡ªå®šä¹‰æ ·å¼

# Proposed Solution (Populated by INNOVATE mode)
[Different approaches discussed, pros/cons evaluation, final favored solution direction]

# Implementation Plan (Generated by PLAN mode)

## æ ¸å¿ƒUIäº¤äº’éœ€æ±‚æ•´åˆ
1. **é»˜è®¤çŠ¶æ€**ï¼šé¦–é¡µé€‰æ‹©ç¬¬ä¸€ä¸ªåˆ†ç±»ï¼Œæ‰€æœ‰ç­”æ¡ˆæŠ˜å 
2. **å“åº”å¼å¸ƒå±€**ï¼šPCç«¯å·¦å³ä¸¤æ ï¼Œç§»åŠ¨ç«¯å•æ 
3. **ç°ä»£æ‰å¹³é£æ ¼**ï¼šå……åˆ†åˆ©ç”¨daisyUIç»„ä»¶åº“
4. **äº¤äº’ä½“éªŒ**ï¼šç‚¹å‡»å±•å¼€/æŠ˜å ç­”æ¡ˆ

## æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### å“åº”å¼å¸ƒå±€ç­–ç•¥
- PCç«¯(lgåŠä»¥ä¸Š)ï¼šå·¦ä¾§åˆ†ç±»å¯¼èˆªæ (å›ºå®šå®½åº¦) + å³ä¾§é¢˜ç›®åŒºåŸŸ(è‡ªé€‚åº”)
- ç§»åŠ¨ç«¯(mdåŠä»¥ä¸‹)ï¼šé¡¶éƒ¨åˆ†ç±»tabs + ä¸‹æ–¹é¢˜ç›®åˆ—è¡¨(å•æ )

### ç»„ä»¶è®¾è®¡æ–¹æ¡ˆ
- ä½¿ç”¨daisyUIçš„drawerç»„ä»¶å®ç°PCä¾§è¾¹æ 
- ä½¿ç”¨tabsç»„ä»¶å®ç°ç§»åŠ¨ç«¯åˆ†ç±»åˆ‡æ¢
- ä½¿ç”¨collapseç»„ä»¶å®ç°é¢˜ç›®æŠ˜å äº¤äº’
- ä½¿ç”¨cardç»„ä»¶åŒ…è£…é¢˜ç›®å†…å®¹
- é›†æˆtheme-controllerå®ç°ä¸»é¢˜åˆ‡æ¢

### å®ç°æ–‡ä»¶è®¡åˆ’

**æ–‡ä»¶å˜æ›´åˆ—è¡¨ï¼š**

- **File**: src/components/InterviewBank/CategorySidebar.vue
  - **Rationale**: åˆ›å»ºPCç«¯å·¦ä¾§åˆ†ç±»å¯¼èˆªæ ç»„ä»¶ï¼Œæ”¯æŒåˆ†ç±»é€‰æ‹©å’Œä¸»é¢˜åˆ‡æ¢

- **File**: src/components/InterviewBank/CategoryTabs.vue
  - **Rationale**: åˆ›å»ºç§»åŠ¨ç«¯é¡¶éƒ¨åˆ†ç±»é€‰æ‹©tabsç»„ä»¶

- **File**: src/components/InterviewBank/QuestionCard.vue
  - **Rationale**: åˆ›å»ºåŸºäºdaisyUI collapseçš„é¢˜ç›®å¡ç‰‡ç»„ä»¶ï¼Œæ”¯æŒå±•å¼€/æŠ˜å 

- **File**: src/components/InterviewBank/ThemeToggle.vue
  - **Rationale**: åˆ›å»ºä¸»é¢˜åˆ‡æ¢ç»„ä»¶ï¼Œä½¿ç”¨daisyUI theme-controller

- **File**: src/views/InterviewBankView.vue
  - **Rationale**: åˆ›å»ºä¸»é¡µé¢è§†å›¾ï¼Œå®ç°å“åº”å¼ä¸¤æ /å•æ å¸ƒå±€é€»è¾‘

- **File**: src/composables/useInterviewBank.ts
  - **Rationale**: åˆ›å»ºç»„åˆå¼å‡½æ•°ç®¡ç†é¢˜åº“çŠ¶æ€å’Œäº¤äº’é€»è¾‘

- **File**: src/data/mockData.ts
  - **Rationale**: åˆ›å»ºæ¨¡æ‹Ÿé¢˜åº“æ•°æ®ï¼ŒåŒ…å«å¤šä¸ªåˆ†ç±»çš„é¢˜ç›®

- **File**: src/types/interview.ts
  - **Rationale**: å®šä¹‰TypeScriptç±»å‹æ¥å£

- **File**: src/router/index.ts
  - **Rationale**: æ›´æ–°è·¯ç”±é…ç½®ï¼Œæ·»åŠ é¢˜åº“é¡µé¢è·¯ç”±

### è¯¦ç»†è®¾è®¡è§„èŒƒ

**é¢œè‰²æ–¹æ¡ˆ**ï¼šåŸºäºdaisyUIè¯­ä¹‰åŒ–é¢œè‰²
- ä¸»è‰²è°ƒï¼šprimary/secondary
- èƒŒæ™¯è‰²ï¼šbase-100/base-200/base-300
- æ–‡æœ¬è‰²ï¼šbase-content
- è¾¹æ¡†è‰²ï¼šbase-300

**ç»„ä»¶æ ·å¼æ ‡å‡†**ï¼š
- å¡ç‰‡é˜´å½±ï¼šshadow-småˆ°shadow-lg
- åœ†è§’ï¼šrounded-lgç»Ÿä¸€æ ‡å‡†
- é—´è·ï¼šä½¿ç”¨4/8/12/16pxæ ‡å‡†é—´è·
- è¿‡æ¸¡åŠ¨ç”»ï¼štransition-all duration-200

**å“åº”å¼æ–­ç‚¹**ï¼š
- sm: 640px (ç§»åŠ¨ç«¯)
- md: 768px (å¹³æ¿)
- lg: 1024px (PCç«¯ä¸¤æ è§¦å‘ç‚¹)
- xl: 1280px (å®½å±ä¼˜åŒ–)

## Implementation Checklist:
1. åˆ›å»ºTypeScriptç±»å‹å®šä¹‰æ–‡ä»¶(src/types/interview.ts)
2. åˆ›å»ºæ¨¡æ‹Ÿæ•°æ®æ–‡ä»¶(src/data/mockData.ts)
3. åˆ›å»ºé¢˜åº“çŠ¶æ€ç®¡ç†ç»„åˆå‡½æ•°(src/composables/useInterviewBank.ts)
4. åˆ›å»ºä¸»é¢˜åˆ‡æ¢ç»„ä»¶(src/components/InterviewBank/ThemeToggle.vue)
5. åˆ›å»ºé¢˜ç›®å¡ç‰‡ç»„ä»¶(src/components/InterviewBank/QuestionCard.vue)
6. åˆ›å»ºPCç«¯ä¾§è¾¹æ ç»„ä»¶(src/components/InterviewBank/CategorySidebar.vue)
7. åˆ›å»ºç§»åŠ¨ç«¯åˆ†ç±»tabsç»„ä»¶(src/components/InterviewBank/CategoryTabs.vue)
8. åˆ›å»ºä¸»é¡µé¢è§†å›¾ç»„ä»¶(src/views/InterviewBankView.vue)
9. æ›´æ–°è·¯ç”±é…ç½®æ·»åŠ é¢˜åº“é¡µé¢
10. æµ‹è¯•å“åº”å¼å¸ƒå±€åœ¨ä¸åŒè®¾å¤‡ä¸Šçš„è¡¨ç°
11. éªŒè¯é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªåˆ†ç±»å’ŒæŠ˜å çŠ¶æ€çš„å®ç°
12. ä¼˜åŒ–ç‚¹å‡»äº¤äº’ä½“éªŒå’ŒåŠ¨ç”»è¿‡æ¸¡æ•ˆæœ

# Current Execution Step (Updated by EXECUTE mode when starting a step)
> å¾…å¼€å§‹æ‰§è¡Œç¬¬ä¸€æ­¥

# Task Progress (Appended by EXECUTE mode after each step completion)

*   [2024-12-30 æ­¥éª¤1-10]
    *   Step: æ­¥éª¤1-10 å®Œæ•´å®ç°é¢˜åº“åº”ç”¨æ ¸å¿ƒåŠŸèƒ½
    *   Modifications: åˆ›å»ºäº†æ‰€æœ‰æ ¸å¿ƒç»„ä»¶æ–‡ä»¶å’Œé…ç½®
    *   Change Summary: å®Œæˆäº†TypeScriptç±»å‹å®šä¹‰ã€æ•°æ®ç®¡ç†ã€æ‰€æœ‰Vueç»„ä»¶ã€è·¯ç”±é…ç½®ç­‰
    *   Reason: æ‰§è¡Œè®¡åˆ’æ­¥éª¤1-10
    *   Blockers: æ— 
    *   User Confirmation Status: Success

*   [2024-12-30 æ­¥éª¤11]
    *   Step: éªŒè¯é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªåˆ†ç±»å’ŒæŠ˜å çŠ¶æ€çš„å®ç°  
    *   Modifications: 
      - ä¿®å¤src/composables/useInterviewBank.tsä¸­é»˜è®¤åˆ†ç±»é€‰æ‹©é€»è¾‘
      - æ”¹è¿›loadUserDataå‡½æ•°ï¼Œåªæœ‰å½“ä¿å­˜çš„åˆ†ç±»IDæœ‰æ•ˆæ—¶æ‰ä½¿ç”¨
      - ç¡®ä¿é¢˜ç›®é»˜è®¤isExpanded: falseæŠ˜å çŠ¶æ€
    *   Change Summary: ä¿®å¤äº†åˆ†ç±»é€‰æ‹©é€»è¾‘å†²çªï¼Œç¡®ä¿é»˜è®¤è¡Œä¸ºç¬¦åˆè¦æ±‚
    *   Reason: æ‰§è¡Œè®¡åˆ’æ­¥éª¤11
    *   Blockers: æ— 
    *   Status: Pending Confirmation

*   [2024-12-30 æ­¥éª¤12]
    *   Step: ä¼˜åŒ–ç‚¹å‡»äº¤äº’ä½“éªŒå’ŒåŠ¨ç”»è¿‡æ¸¡æ•ˆæœ
    *   Modifications:
      - å¤§å¹…å¢å¼ºsrc/components/InterviewBank/QuestionCard.vueçš„CSSåŠ¨ç”»
      - æ·»åŠ å¡ç‰‡æ‚¬åœç¼©æ”¾æ•ˆæœ(PCç«¯)ã€æŒ‰é’®æ‚¬åœåŠ¨ç”»ã€å±•å¼€æŒ‡ç¤ºå™¨æ—‹è½¬åŠ¨ç”»
      - å®ç°slideDownå±•å¼€åŠ¨ç”»ã€æ¨¡æ€æ¡†æ»‘å…¥åŠ¨ç”»ã€å†…å®¹æ¸å…¥åŠ¨ç”»
      - æ·»åŠ ç§»åŠ¨ç«¯é•¿æŒ‰æ•ˆæœã€é«˜å¯¹æ¯”åº¦æ”¯æŒã€å‡å°‘åŠ¨ç”»åå¥½æ”¯æŒ
      - ä¼˜åŒ–æ·±è‰²æ¨¡å¼å’Œå“åº”å¼ä½“éªŒ
    *   Change Summary: å®ç°äº†ä¸°å¯Œçš„äº¤äº’åŠ¨ç”»å’Œå¾®äº¤äº’æ•ˆæœï¼Œæå‡ç”¨æˆ·ä½“éªŒ
    *   Reason: æ‰§è¡Œè®¡åˆ’æ­¥éª¤12
    *   Blockers: æ— 
    *   Status: Pending Confirmation

*   [2024-12-30 IndexedDBé‡æ„ æ­¥éª¤1-5]
    *   Step: IndexedDBæ¶æ„åŸºç¡€è®¾æ–½å»ºè®¾ (æ­¥éª¤1-5)
    *   Modifications:
      - ç¡®è®¤package.jsonä¸­å·²å­˜åœ¨dexieä¾èµ–
      - åˆ›å»ºsrc/types/storage.tsï¼Œå®šä¹‰å®Œæ•´çš„IndexedDBå­˜å‚¨ç±»å‹ç³»ç»Ÿ
      - åˆ›å»ºsrc/services/database/schema.tsï¼Œå®šä¹‰Dexieæ•°æ®åº“Schemaå’Œç‰ˆæœ¬æ§åˆ¶
      - åˆ›å»ºsrc/services/database/index.tsï¼Œå®ç°å®Œæ•´çš„æ•°æ®åº“ç±»å’Œåˆå§‹åŒ–é€»è¾‘  
      - åˆ›å»ºsrc/services/cache/cacheManager.tsï¼Œå®ç°ç¼“å­˜ç®¡ç†å™¨ï¼ˆå¾…å®Œå–„æ•°æ®åº“é›†æˆï¼‰
    *   Change Summary: å®ŒæˆIndexedDBåŸºç¡€æ¶æ„ï¼Œç¼“å­˜æœ‰æ•ˆæœŸè®¾ç½®ä¸º30å¤©ï¼Œå»ºç«‹äº†å®Œæ•´çš„ç±»å‹ç³»ç»Ÿå’Œæ•°æ®åº“Schema
    *   Reason: æ‰§è¡Œè®¡åˆ’æ­¥éª¤1-5ï¼Œè°ƒæ•´æ•°æ®è·å–æ–¹å¼ä¸ºscriptåŠ è½½+IndexedDBå­˜å‚¨
    *   Blockers: æ— 
# Final Review (Populated by REVIEW mode)

## æ•°æ®è·å–äº¤äº’æ–¹æ¡ˆ

### æ•°æ®è·å–ç­–ç•¥
**æ ¸å¿ƒåŸåˆ™**ï¼šä¼˜å…ˆä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼ŒæŒ‰éœ€è¿œç¨‹åŠ è½½ï¼Œæ¸è¿›å¼æ•°æ®å‘ˆç°

### IndexedDBç¼“å­˜ç­–ç•¥
```typescript
interface CacheStrategy {
  // ç¼“å­˜æ£€æŸ¥é€»è¾‘
  checkCacheExists: () => Promise<boolean>;
  
  // ç¼“å­˜ç‰ˆæœ¬æ£€æŸ¥
  checkCacheVersion: () => Promise<{
    hasCache: boolean;
    version: string;
    lastUpdated: Date;
    isExpired: boolean;
  }>;
  
  // ç¼“å­˜æ•°æ®è·å–
  getCachedData: () => Promise<{
    categories: Category[];
    questions: Question[];
    totalCount: number;
  }>;
  
  // ç¼“å­˜æ•°æ®å­˜å‚¨
  setCachedData: (data: any, version: string) => Promise<void>;
}
```

### åŠ¨æ€ScriptåŠ è½½æ–¹æ¡ˆ
```typescript
interface ScriptLoadingConfig {
  // æ•°æ®æºé…ç½®
  dataSources: {
    [categoryId: string]: {
      scriptUrl: string;         // JSONæ•°æ®çš„scriptæ ‡ç­¾URL
      globalVarName: string;     // å…¨å±€å˜é‡å
      categoryName: string;      // åˆ†ç±»æ˜¾ç¤ºåç§°
      priority: number;          // åŠ è½½ä¼˜å…ˆçº§
      essential: boolean;        // æ˜¯å¦ä¸ºå¿…éœ€æ•°æ®
    };
  };
  
  // åŠ è½½é…ç½®
  loadingConfig: {
    concurrent: number;          // å¹¶å‘åŠ è½½æ•°é‡
    timeout: number;            // è¶…æ—¶æ—¶é—´(ms)
    retryCount: number;         // é‡è¯•æ¬¡æ•°
    retryDelay: number;         // é‡è¯•å»¶è¿Ÿ(ms)
  };
}

// ç¤ºä¾‹é…ç½®
const defaultConfig: ScriptLoadingConfig = {
  dataSources: {
    'huawei-test': {
      scriptUrl: '/data/huawei-software-test-questions.js',
      globalVarName: 'HUAWEI_TEST_DATA',
      categoryName: 'åä¸ºè½¯ä»¶æµ‹è¯•é¢˜',
      priority: 1,
      essential: true
    },
    'linux-basic': {
      scriptUrl: '/data/linux-basic-questions.js', 
      globalVarName: 'LINUX_BASIC_DATA',
      categoryName: 'LinuxåŸºç¡€é¢˜',
      priority: 2,
      essential: true
    },
    'python-interview': {
      scriptUrl: '/data/python-interview-questions.js',
      globalVarName: 'PYTHON_INTERVIEW_DATA', 
      categoryName: 'Pythoné¢è¯•é¢˜',
      priority: 3,
      essential: false
    }
  },
  loadingConfig: {
    concurrent: 2,
    timeout: 10000,
    retryCount: 3,
    retryDelay: 1000
  }
};
```

### åŠ è½½è¿›åº¦UIè®¾è®¡

#### åŠ è½½çŠ¶æ€æ¥å£
```typescript
interface LoadingState {
  phase: 'checking' | 'loading' | 'processing' | 'complete' | 'error';
  totalCategories: number;
  loadedCategories: number;
  currentCategory?: {
    id: string;
    name: string;
    status: 'pending' | 'loading' | 'success' | 'error';
    progress: number;        // 0-100
    questionsCount?: number;
  };
  categories: Array<{
    id: string;
    name: string;
    status: 'pending' | 'loading' | 'success' | 'error';
    questionsCount: number;
    loadTime?: number;       // åŠ è½½è€—æ—¶(ms)
  }>;
  overallProgress: number;   // 0-100
  errorMessage?: string;
}
```

#### åŠ è½½UIç»„ä»¶è®¾è®¡
```vue
<!-- LoadingScreen.vue ç»„ä»¶ç»“æ„ -->
<template>
  <div class="loading-screen bg-base-100 min-h-screen flex flex-col justify-center items-center p-4">
    <!-- æ•´ä½“è¿›åº¦ -->
    <div class="w-full max-w-md mb-8">
      <div class="text-center mb-4">
        <div class="loading loading-spinner loading-lg text-primary"></div>
        <h2 class="text-xl font-semibold mt-4">{{ getPhaseText() }}</h2>
        <p class="text-base-content/70 mt-2">{{ getPhaseDescription() }}</p>
      </div>
      
      <!-- æ•´ä½“è¿›åº¦æ¡ -->
      <div class="w-full bg-base-200 rounded-full h-2 mb-4">
        <div 
          class="bg-primary h-2 rounded-full transition-all duration-300"
          :style="{ width: `${loadingState.overallProgress}%` }"
        ></div>
      </div>
      
      <div class="text-center text-sm text-base-content/60">
        {{ loadingState.loadedCategories }} / {{ loadingState.totalCategories }} åˆ†ç±»å·²åŠ è½½
      </div>
    </div>
    
    <!-- åˆ†ç±»åŠ è½½è¯¦æƒ… -->
    <div class="w-full max-w-lg space-y-3">
      <div 
        v-for="category in loadingState.categories" 
        :key="category.id"
        class="flex items-center justify-between p-3 bg-base-200 rounded-lg"
      >
        <div class="flex items-center space-x-3">
          <!-- çŠ¶æ€å›¾æ ‡ -->
          <div class="flex-shrink-0">
            <div v-if="category.status === 'pending'" class="w-4 h-4 bg-base-300 rounded-full"></div>
            <div v-else-if="category.status === 'loading'" class="loading loading-spinner loading-sm text-primary"></div>
            <div v-else-if="category.status === 'success'" class="text-success">âœ“</div>
            <div v-else-if="category.status === 'error'" class="text-error">âœ—</div>
          </div>
          
          <!-- åˆ†ç±»ä¿¡æ¯ -->
          <div>
            <div class="font-medium">{{ category.name }}</div>
            <div v-if="category.questionsCount" class="text-sm text-base-content/60">
              {{ category.questionsCount }} é“é¢˜ç›®
            </div>
            <div v-if="category.loadTime && category.status === 'success'" class="text-xs text-base-content/50">
              è€—æ—¶ {{ category.loadTime }}ms
            </div>
          </div>
        </div>
        
        <!-- åŠ è½½æ—¶é—´æˆ–çŠ¶æ€ -->
        <div class="text-sm text-base-content/60">
          <span v-if="category.status === 'pending'">ç­‰å¾…ä¸­</span>
          <span v-else-if="category.status === 'loading'">åŠ è½½ä¸­</span>
          <span v-else-if="category.status === 'success'" class="text-success">å®Œæˆ</span>
          <span v-else-if="category.status === 'error'" class="text-error">å¤±è´¥</span>
        </div>
      </div>
    </div>
    
    <!-- é”™è¯¯ä¿¡æ¯ -->
    <div v-if="loadingState.errorMessage" class="mt-6 w-full max-w-lg">
      <div class="alert alert-error">
        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>{{ loadingState.errorMessage }}</span>
        <button @click="retryLoading" class="btn btn-sm btn-outline">é‡è¯•</button>
      </div>
    </div>
  </div>
</template>
```

### æ•°æ®è·å–å®Œæ•´æµç¨‹

#### æµç¨‹æ­¥éª¤è®¾è®¡
```typescript
interface DataLoadingFlow {
  steps: Array<{
    phase: string;
    description: string;
    action: () => Promise<any>;
    onProgress?: (progress: number) => void;
    onSuccess?: (result: any) => void;
    onError?: (error: Error) => void;
  }>;
}

const dataLoadingFlow: DataLoadingFlow = {
  steps: [
    {
      phase: 'checking',
      description: 'æ£€æŸ¥æœ¬åœ°ç¼“å­˜',
      action: async () => {
        const cacheInfo = await checkCacheVersion();
        return cacheInfo;
      }
    },
    {
      phase: 'loading', 
      description: 'åŠ è½½è¿œç¨‹æ•°æ®',
      action: async () => {
        if (hasCacheAndValid) {
          return await getCachedData();
        } else {
          return await loadRemoteDataWithProgress();
        }
      },
      onProgress: (progress) => {
        updateLoadingProgress(progress);
      }
    },
    {
      phase: 'processing',
      description: 'å¤„ç†æ•°æ®',
      action: async (rawData) => {
        const transformedData = await transformAndValidateData(rawData);
        await setCachedData(transformedData);
        return transformedData;
      }
    },
    {
      phase: 'complete',
      description: 'åˆå§‹åŒ–ç•Œé¢',
      action: async (data) => {
        await initializeAppState(data);
        await setupDefaultCategory();
        return data;
      }
    }
  ]
};
```

#### ScriptåŠ¨æ€åŠ è½½å®ç°
```typescript
interface ScriptLoader {
  loadScript: (config: ScriptConfig) => Promise<any>;
  loadMultipleScripts: (configs: ScriptConfig[]) => Promise<any[]>;
  parseScriptData: (globalVarName: string) => any;
  cleanupScript: (scriptElement: HTMLScriptElement) => void;
}

// æ ¸å¿ƒåŠ è½½é€»è¾‘
const scriptLoader: ScriptLoader = {
  async loadScript(config) {
    return new Promise((resolve, reject) => {
      const script = document.createElement('script');
      script.src = config.scriptUrl;
      script.async = true;
      
      const timeout = setTimeout(() => {
        document.head.removeChild(script);
        reject(new Error(`åŠ è½½è¶…æ—¶: ${config.categoryName}`));
      }, config.timeout || 10000);
      
      script.onload = () => {
        clearTimeout(timeout);
        try {
          const data = window[config.globalVarName];
          if (!data) {
            throw new Error(`æ•°æ®å˜é‡æœªæ‰¾åˆ°: ${config.globalVarName}`);
          }
          
          // æ¸…ç†å…¨å±€å˜é‡
          delete window[config.globalVarName];
          document.head.removeChild(script);
          
          resolve({
            categoryId: config.categoryId,
            categoryName: config.categoryName,
            data: data,
            questionsCount: Array.isArray(data) ? data.length : 0
          });
        } catch (error) {
          reject(error);
        }
      };
      
      script.onerror = () => {
        clearTimeout(timeout);
        document.head.removeChild(script);
        reject(new Error(`åŠ è½½å¤±è´¥: ${config.categoryName}`));
      };
      
      document.head.appendChild(script);
    });
  },
  
  async loadMultipleScripts(configs) {
    const results = [];
    const concurrent = Math.min(configs.length, 3); // æœ€å¤š3ä¸ªå¹¶å‘
    
    for (let i = 0; i < configs.length; i += concurrent) {
      const batch = configs.slice(i, i + concurrent);
      const batchPromises = batch.map(config => 
        this.loadScript(config).catch(error => ({ error, config }))
      );
      
      const batchResults = await Promise.allSettled(batchPromises);
      results.push(...batchResults);
      
      // æ›´æ–°åŠ è½½è¿›åº¦
      const progress = Math.round(((i + batch.length) / configs.length) * 100);
      updateLoadingProgress(progress);
    }
    
    return results;
  }
};
```

### åŠ è½½çŠ¶æ€ç®¡ç†

#### çŠ¶æ€ç®¡ç†Hook
```typescript
// useDataLoading.ts
interface UseDataLoading {
  loadingState: Ref<LoadingState>;
  startDataLoading: () => Promise<void>;
  retryLoading: () => Promise<void>;
  resetLoading: () => void;
}

export function useDataLoading(): UseDataLoading {
  const loadingState = ref<LoadingState>({
    phase: 'checking',
    totalCategories: 0,
    loadedCategories: 0,
    categories: [],
    overallProgress: 0
  });
  
  const startDataLoading = async () => {
    try {
      // 1. æ£€æŸ¥ç¼“å­˜
      loadingState.value.phase = 'checking';
      const cacheInfo = await checkCacheVersion();
      
      if (cacheInfo.hasCache && !cacheInfo.isExpired) {
        // ä½¿ç”¨ç¼“å­˜æ•°æ®
        const cachedData = await getCachedData();
        await initializeWithData(cachedData);
        loadingState.value.phase = 'complete';
        return;
      }
      
      // 2. åŠ è½½è¿œç¨‹æ•°æ®
      loadingState.value.phase = 'loading';
      await loadRemoteData();
      
      // 3. å¤„ç†å®Œæˆ
      loadingState.value.phase = 'complete';
      
    } catch (error) {
      loadingState.value.phase = 'error';
      loadingState.value.errorMessage = error.message;
    }
  };
  
  return {
    loadingState,
    startDataLoading,
    retryLoading: startDataLoading,
    resetLoading: () => {
      loadingState.value = {
        phase: 'checking',
        totalCategories: 0,
        loadedCategories: 0,
        categories: [],
        overallProgress: 0
      };
    }
  };
}
``` 